function htmlOutputTariffM(a){var e=1*laoWPCalc.sizeCompValM+1*laoWPCalc.quantityCompValM+1*laoWPCalc.countPowerValM+1*laoWPCalc.internet1ValM+1*laoWPCalc.internet2ValM+1*laoWPCalc.ipPointsValM+1*laoWPCalc.responseTimeValM;a.html(e).append(" "+laoWPCalc.cash)}function htmlOutputTariffS(a){var e=1*laoWPCalc.sizeCompValS+1*laoWPCalc.quantityCompValS+1*laoWPCalc.countPowerValS+1*laoWPCalc.internet1ValS+1*laoWPCalc.internet2ValS+1*laoWPCalc.ipPointsValS+1*laoWPCalc.responseTimeValS;a.html(e).append(" "+laoWPCalc.cash)}function getStartMes(a){return $("#"+a.attr("id")+" option:selected")[0].dataset.mes}function getStartOn(a){return $("#"+a.attr("id")+" option:selected")[0].dataset.on}function getStartSpeed(a){return $("#"+a.attr("id")+" option:selected")[0].dataset.speed}function getStartSet(a){return $("#"+a.attr("id")+" option:selected")[0].dataset.set}function getStartTariff(a){return $("#"+a.attr("id")+" option:selected")[0].value}function getStartTariffText(a){return $("#"+a.attr("id")+" option:selected").html()}function getPayResDiscount(a){return $("#"+a.attr("id")+" option:selected")[0].dataset.discount}function getPayRes(a,e,t){var l=1*e.html().split(" ")[0]*laoWPCalc.payPeriodName*1+1*t.html().split(" ")[0];a.html("Сума ("+laoWPCalc.payPeriodName+") "+l+" "+laoWPCalc.cash),1*laoWPCalc.payPeriodDiscount>0?$payDiscount.html("Скидка (-"+laoWPCalc.payPeriodDiscount+"%) "+1*l*laoWPCalc.payPeriodDiscount*1/100+" "+laoWPCalc.cash):$payDiscount.html("")}function error(a,e){var t=$("form#send_data input[name="+a);if(""===t.val())return t.css("border","1px solid red"),!1}function getValue(a,e){return(a=$("form#send_data "+e+"[name="+a)).val()}function removeError(a){var e=(a=$("form#send_data .pole")).css("border");a.focus(function(){a.css("border",e)})}var laoWPCalc={};laoWPCalc.cash="EUR",laoWPCalc.valuta=laoWPCalc.cash+"/месяц ,",laoWPCalc.setting="EUR установка.",laoWPCalc.on="включено",laoWPCalc.off="",laoWPCalc.speed1="скорость ограничена",laoWPCalc.speed2="скорость не ограничена",laoWPCalc.speed3="полная скорость",laoWPCalc.sizeCompMin=75,laoWPCalc.sizeCompAppend=35,laoWPCalc.sizeCompSetting=100,laoWPCalc.sizeCompTariff=12,laoWPCalc.sizeCompSelected=1,laoWPCalc.quantityCompSelected=0,laoWPCalc.quantityComp=[{name:"2 PDU",on:laoWPCalc.on,priceMes:0,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"4 PDU",on:laoWPCalc.off,priceMes:60,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting},{name:"6 PDU",on:laoWPCalc.off,priceMes:80,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting}],laoWPCalc.internet1Selected=0,laoWPCalc.internet1Arr=[{name:"1 x 100 Мбит/с",on:laoWPCalc.off,priceMes:0,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"2 x 100 Мбит/с",on:laoWPCalc.on,priceMes:25,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"1 x 1 Гбит/с",on:laoWPCalc.off,priceMes:0,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"2 x 1 Гбит/с",on:laoWPCalc.on,priceMes:110,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"1 x 10 Гбит/с",on:laoWPCalc.off,priceMes:0,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"2 x 10 Гбит/с",on:laoWPCalc.on,priceMes:220,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting}],laoWPCalc.internet2Selected=0,laoWPCalc.internet2Arr=[{name:"100 Мбит/с",speed:laoWPCalc.speed1,priceMes:80,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting},{name:"200 Мбит/с",speed:laoWPCalc.speed2,priceMes:160,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting},{name:"300 Мбит/с",speed:laoWPCalc.speed2,priceMes:240,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting},{name:"400 Мбит/с",speed:laoWPCalc.speed2,priceMes:320,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting},{name:"500 Мбит/с",speed:laoWPCalc.speed2,priceMes:400,valuta:laoWPCalc.valuta,priceSet:500,setVal:laoWPCalc.setting},{name:"1 Гбит/с",speed:laoWPCalc.speed2,priceMes:800,valuta:laoWPCalc.valuta,priceSet:100,setVal:laoWPCalc.setting},{name:"100 Мбит/с",speed:laoWPCalc.speed3,priceMes:30,valuta:laoWPCalc.valuta,priceSet:50,setVal:laoWPCalc.setting}],laoWPCalc.responseTimeSelected=0,laoWPCalc.responseTimeArr=[{name:"При первой же возможности",on:laoWPCalc.on,priceMes:0,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting},{name:"4 часа",on:laoWPCalc.off,priceMes:15,valuta:laoWPCalc.valuta,priceSet:0,setVal:laoWPCalc.setting}],laoWPCalc.powerCompMinVal=.5,laoWPCalc.powerCompStartVal=laoWPCalc.powerCompMinVal,laoWPCalc.powerCompMaxVal=3,laoWPCalc.powerCompStep=.5,laoWPCalc.powerCompMinMes=45,laoWPCalc.powerCompAppend=45,laoWPCalc.powerCompSetting=0,laoWPCalc.powerCompWt="кВт",laoWPCalc.ipPointsStartVal=4,laoWPCalc.ipPointsMinVal=4,laoWPCalc.ipPointsMaxVal=12,laoWPCalc.ipPointsStep=1,laoWPCalc.ipPointsMin=0,laoWPCalc.ipPointsAppend=2,laoWPCalc.ipPointsMinMes=0,laoWPCalc.payPeriodSelected=0,laoWPCalc.payPeriodArr=[{name:12,discount:0},{name:18,discount:2},{name:24,discount:5},{name:36,discount:10}],laoWPCalc.resValM=0,laoWPCalc.sizeCompValM=0,laoWPCalc.quantityCompValM=0,laoWPCalc.countPowerValM=0,laoWPCalc.internet1ValM=0,laoWPCalc.internet2ValM=0,laoWPCalc.ipPointsValM=0,laoWPCalc.responseTimeValM=0,laoWPCalc.resValS=0,laoWPCalc.sizeCompValS=0,laoWPCalc.quantityCompValS=0,laoWPCalc.countPowerValS=0,laoWPCalc.internet1ValS=0,laoWPCalc.internet2ValS=0,laoWPCalc.ipPointsValS=0,laoWPCalc.responseTimeValS=0,laoWPCalc.sizeCompSelectTariff="",laoWPCalc.quantityCompSelectTariff="",laoWPCalc.countPowerSelectTariff="",laoWPCalc.internet1SelectTariff="",laoWPCalc.internet2SelectTariff="",laoWPCalc.ipPointsSelectTariff="",laoWPCalc.responseTimeSelectTariff="",laoWPCalc.payPeriodDiscount=0,$(function(){var a,e,t,l,o,i,n,c,p,r,s,P,C,W,m,u,f,d,S,M,V=0,v=0,g=0,T=0,y=[];for(s=$(".output_tariff .pay_mes .val"),r=$(".output_tariff .pay_setting .val"),$payRes=$(".output_tariff .pay_res .val"),$payDiscount=$(".output_tariff .pay_res .discount"),v=0,g=0,T="",a=$("#size_comp"),g=laoWPCalc.sizeCompSetting,V=1;V<=laoWPCalc.sizeCompTariff;V++)0===v?v=laoWPCalc.sizeCompMin:v+=laoWPCalc.sizeCompAppend,T=V===laoWPCalc.sizeCompSelected?"selected":"",a.append('<option value="'+V+'U" data-mes="'+v+'" data-set="'+g+'" '+T+">"+V+"U | "+v+" "+laoWPCalc.valuta+" "+g+" "+laoWPCalc.setting+"</option>");for(laoWPCalc.sizeCompValM=getStartMes(a),laoWPCalc.sizeCompValS=getStartSet(a),laoWPCalc.sizeCompSelectTariff=getStartTariff(a),a.selectmenu({width:"100%",select:function(a,e){laoWPCalc.sizeCompValM=e.item.element[0].dataset.mes,laoWPCalc.sizeCompValS=e.item.element[0].dataset.set,laoWPCalc.sizeCompSelectTariff=e.item.value,htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),e=$("#quantity_comp"),g=(y=laoWPCalc.quantityComp).length,V=0;V<g;V++)T=V===laoWPCalc.quantityCompSelected?"selected":"",e.append('<option value="'+y[V].name+'" data-on="'+y[V].on+'" data-mes="'+y[V].priceMes+'" data-set="'+y[V].priceSet+'"'+T+">"+y[V].name+" "+y[V].on+" | "+y[V].priceMes+" "+y[V].valuta+" "+y[V].priceSet+" "+y[V].setVal+"</option>");for(laoWPCalc.quantityCompOn=getStartOn(e),laoWPCalc.quantityCompValM=getStartMes(e),laoWPCalc.quantityCompValS=getStartSet(e),laoWPCalc.quantityCompSelectTariff=getStartTariff(e),e.selectmenu({width:"100%",select:function(a,e){laoWPCalc.quantityCompValM=e.item.element[0].dataset.mes,laoWPCalc.quantityCompValS=e.item.element[0].dataset.set,laoWPCalc.quantityCompOn=e.item.element[0].dataset.on,laoWPCalc.quantityCompSelectTariff=e.item.value,htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),l=$("#power_comp"),n=$("span.count_power"),c=$("span.price_power"),n.html(laoWPCalc.powerCompStartVal+" "+laoWPCalc.powerCompWt),c.html(laoWPCalc.powerCompMinMes+" "+laoWPCalc.valuta+" "+laoWPCalc.powerCompSetting+" "+laoWPCalc.setting),laoWPCalc.countPowerSelectTariff=laoWPCalc.powerCompStartVal+" "+laoWPCalc.powerCompWt,laoWPCalc.countPowerValM=laoWPCalc.powerCompMinMes,laoWPCalc.countPowerValS=laoWPCalc.powerCompSetting,l.slider({value:laoWPCalc.powerCompStartVal,min:laoWPCalc.powerCompMinVal,max:laoWPCalc.powerCompMaxVal,step:laoWPCalc.powerCompStep,slide:function(a,e){var t=l.slider("value"),o=e.value+"";"5"!==o.split(".")[1]?(n.html(o+".0 "+laoWPCalc.powerCompWt),laoWPCalc.countPowerSelectTariff=o+".0 "+laoWPCalc.powerCompWt):(n.html(o+" "+laoWPCalc.powerCompWt),laoWPCalc.countPowerSelectTariff=o+" "+laoWPCalc.powerCompWt),1*e.value>1*t?(c.html(1*laoWPCalc.powerCompMinMes+1*laoWPCalc.powerCompAppend),c.append(" "+laoWPCalc.valuta+" "+laoWPCalc.powerCompSetting+" "+laoWPCalc.setting),laoWPCalc.powerCompMinMes+=1*laoWPCalc.powerCompAppend):(c.html(1*laoWPCalc.powerCompMinMes-1*laoWPCalc.powerCompAppend),c.append(" "+laoWPCalc.valuta+" "+laoWPCalc.powerCompSetting+" "+laoWPCalc.setting),laoWPCalc.powerCompMinMes-=1*laoWPCalc.powerCompAppend),laoWPCalc.countPowerValM=laoWPCalc.powerCompMinMes,htmlOutputTariffM(s),getPayRes($payRes,s,r)}}),f=$("#internet_1"),g=(y=laoWPCalc.internet1Arr).length,V=0;V<g;V++)T=V===laoWPCalc.internet1Selected?"selected":"",f.append('<option value="'+y[V].name+'" data-on="'+y[V].on+'" data-mes="'+y[V].priceMes+'" data-set="'+y[V].priceSet+'"'+T+">"+y[V].name+" "+y[V].on+" | "+y[V].priceMes+" "+y[V].valuta+" "+y[V].priceSet+" "+y[V].setVal+"</option>");for(laoWPCalc.internet1On=getStartOn(f),laoWPCalc.internet1ValM=getStartMes(f),laoWPCalc.internet1ValS=getStartSet(f),laoWPCalc.internet1SelectTariff=getStartTariff(f),f.selectmenu({width:"100%",select:function(a,e){laoWPCalc.internet1On=e.item.element[0].dataset.on,laoWPCalc.internet1SelectTariff=e.item.value,laoWPCalc.internet1ValM=e.item.element[0].dataset.mes,laoWPCalc.internet1ValS=e.item.element[0].dataset.set,htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),d=$("#internet_2"),g=(y=laoWPCalc.internet2Arr).length,V=0;V<g;V++)T=V===laoWPCalc.internet2Selected?"selected":"",d.append('<option value="'+y[V].name+'" data-speed="'+y[V].speed+'" data-mes="'+y[V].priceMes+'" data-set="'+y[V].priceSet+'"'+T+">"+y[V].name+", "+y[V].speed+" | "+y[V].priceMes+" "+y[V].valuta+" "+y[V].priceSet+" "+y[V].setVal+"</option>");for(laoWPCalc.internet2Speed=getStartSpeed(d),laoWPCalc.internet2ValM=getStartMes(d),laoWPCalc.internet2ValS=getStartSet(d),laoWPCalc.internet2SelectTariff=getStartTariff(d),d.selectmenu({width:"100%",select:function(a,e){laoWPCalc.internet2SelectTariff=e.item.value,laoWPCalc.internet2ValM=e.item.element[0].dataset.mes,laoWPCalc.internet2ValS=e.item.element[0].dataset.set,laoWPCalc.internet2Speed=e.item.element[0].dataset.speed,htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),o=$("#ip_points"),(i=$("span.count_ip")).html(laoWPCalc.ipPointsStartVal),(p=$("span.set_ip")).html(laoWPCalc.ipPointsMinMes+" "+laoWPCalc.valuta+" "+laoWPCalc.ipPointsMin+" "+laoWPCalc.setting),laoWPCalc.ipPointsSelectTariff=laoWPCalc.ipPointsStartVal,laoWPCalc.ipPointsValM=laoWPCalc.ipPointsMinMes,laoWPCalc.ipPointsValS=laoWPCalc.ipPointsMin,o.slider({value:laoWPCalc.ipPointsStartVal,min:laoWPCalc.ipPointsMinVal,max:laoWPCalc.ipPointsMaxVal,step:laoWPCalc.ipPointsStep,slide:function(a,e){var t=o.slider("value");i.html(e.value),1*e.value>1*t?(p.html(1*laoWPCalc.ipPointsMin+1*laoWPCalc.ipPointsAppend),p.append(" "+laoWPCalc.setting),p.prepend(laoWPCalc.ipPointsMinMes+" "+laoWPCalc.valuta+" "),laoWPCalc.ipPointsMin+=1*laoWPCalc.ipPointsAppend):(p.html(1*laoWPCalc.ipPointsMin-1*laoWPCalc.ipPointsAppend),p.prepend(laoWPCalc.ipPointsMinMes+" "+laoWPCalc.valuta+" "),p.append(" "+laoWPCalc.setting),laoWPCalc.ipPointsMin-=1*laoWPCalc.ipPointsAppend),laoWPCalc.ipPointsSelectTariff=e.value,laoWPCalc.ipPointsValS=laoWPCalc.ipPointsMin,htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),t=$("#response_time"),g=(y=laoWPCalc.responseTimeArr).length,V=0;V<g;V++)T=V===laoWPCalc.responseTimeSelected?"selected":"",t.append('<option value="'+y[V].name+'" data-on="'+y[V].on+'" data-mes="'+y[V].priceMes+'" data-set="'+y[V].priceSet+'"'+T+">"+y[V].name+", "+y[V].on+" | "+y[V].priceMes+" "+y[V].valuta+" "+y[V].priceSet+" "+y[V].setVal+"</option>");for(laoWPCalc.responseTimeOn=getStartOn(t),laoWPCalc.responseTimeValM=getStartMes(t),laoWPCalc.responseTimeValS=getStartSet(t),laoWPCalc.responseTimeSelectTariff=getStartTariff(t),t.selectmenu({width:"100%",select:function(a,e){laoWPCalc.responseTimeSelectTariff=e.item.value,laoWPCalc.responseTimeValM=e.item.element[0].dataset.mes,laoWPCalc.responseTimeValS=e.item.element[0].dataset.set,laoWPCalc.responseTimeOn=e.item.element[0].dataset.on,htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r)}}),P=$("#pay_period"),g=(y=laoWPCalc.payPeriodArr).length,V=0;V<g;V++)T=V===laoWPCalc.payPeriodSelected?"selected":"",P.append('<option value="'+y[V].name+'" data-discount="'+y[V].discount+'" '+T+">"+y[V].name+" мес.</option>");laoWPCalc.payPeriodName=getStartTariff(P),laoWPCalc.payPeriodSelectTariff=getStartTariffText(P),laoWPCalc.payPeriodDiscount=getPayResDiscount(P),P.selectmenu({width:"100%",select:function(a,e){laoWPCalc.payPeriodName=e.item.value,laoWPCalc.payPeriodSelectTariff=getStartTariffText(P),laoWPCalc.payPeriodDiscount=getPayResDiscount(P),getPayRes($payRes,s,r),console.log(laoWPCalc.payPeriodDiscount)}}),$("span.wt").html(laoWPCalc.powerCompWt),htmlOutputTariffM(s),htmlOutputTariffS(r),getPayRes($payRes,s,r),C=$(".step_2 .view_tariff p.pay span"),W=$(".step_2 .view_tariff p.size span"),m=$(".step_2 .view_tariff p.count span"),u=$(".step_2 .view_tariff p.power span"),f=$(".step_2 .view_tariff p.internet1 span"),d=$(".step_2 .view_tariff p.internet2 span"),S=$(".step_2 .view_tariff p.ip span"),M=$(".step_2 .view_tariff p.time span"),$("button.go_step2").click(function(){$(".step_1").fadeOut(200,function(){$(".step_2").fadeIn(200)}),C.html(laoWPCalc.payPeriodSelectTariff),W.html(laoWPCalc.sizeCompSelectTariff),m.html(laoWPCalc.quantityCompSelectTariff+", "+laoWPCalc.quantityCompOn),u.html(laoWPCalc.countPowerSelectTariff),f.html(laoWPCalc.internet1SelectTariff+", "+laoWPCalc.internet1On),d.html(laoWPCalc.internet2SelectTariff+", "+laoWPCalc.internet2Speed),S.html(laoWPCalc.ipPointsSelectTariff),M.html(laoWPCalc.responseTimeSelectTariff+", "+laoWPCalc.responseTimeOn),$("button.send_form").click(function(a){a.preventDefault();var e,t,l,o,i,n,c,p,r,s,P,V,v,g,T;if(e=error("company","Введите название компании"),t=error("fio","Введите Имя и Фамилию"),l=error("city","Введите город"),o=error("email","Введите email"),i=error("tel","Введите телефон"),!1===e||!1===t||!1===l||!1===o||!1===i)return!1;e=getValue("company","input"),t=getValue("fio","input"),l=getValue("city","input"),o=getValue("email","input"),i=getValue("tel","input"),n=getValue("comment","textarea"),c=getValue("info","textarea"),p=C.html(),r=W.html(),s=m.html(),P=u.html(),V=f.html(),v=d.html(),g=S.html(),T=M.html(),$.ajax({type:"POST",url:"email.php",data:{company:e,fio:t,city:l,email:o,tel:i,comment:n,info:c,pay:p,size:r,count:s,power:P,internet1:V,internet2:v,ip:g,time:T},success:function(){$(".step_2").fadeOut(200,function(){$(".step_3").fadeIn(200),$(".step_1, .step_2").html("")})},error:function(){console.log("Произошла ошибка")}})})}),$("button.go_step1").click(function(){$(".step_2").fadeOut(200,function(){$(".step_1").fadeIn(200)})})});